{% extends "foundation_base.html" %}

{% block head_add %}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="../static/sorttable.js"></script>
    <script src="../static/readmore.js"></script>
    <script>
    /* When the user clicks on the button,
    toggle between hiding and showing the dropdown content */
    function myFunction() {
        document.getElementById("myDropdown").classList.toggle("show");
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {

        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }
    </script>
    <link rel="stylesheet" href="../static/styles.css"/>
{% endblock %}

{% block body_content %}
    <div id="nav" class="padded">
        <a href="/" class="button">Home</a>
        <a href="/searchPage" class="button">Search through classifieds</a>
        <a href="/addClassified" class="button">Submit a classified</a>
        <a href="/viewPosted/active" class="button">View your posted classifieds</a>
    </div>
    <div id="user_menu" class="top-right dropdown">
        <button onclick="myFunction()" class="dropbtn">Hello, {{ session['fullname'] }}!</button>
        <div id="myDropdown" class="dropdown-content">
            <a href="/viewContact/{{ session['username'] }}">View your profile</a>
            <a href="/feedback">Provide feedback</a>
            <a href="/logout">Sign out</a>
        </div>
    </div>
    {% block internal %}
    {% endblock %}
    <script>
        $('article').readmore({
            moreLink: '<a href="#">Read more...</a>',
            lessLink: '<a href="#">Read less</a>',
            collapsedHeight: 36,
            afterToggle: function(trigger, element, expanded) {
                if(! expanded) { // The "Close" link was clicked
                    $('html, body').animate({scrollTop: element.offset().top}, {duration: 100});
                }
            }
        });
    </script>

{% endblock %}