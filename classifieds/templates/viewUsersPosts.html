{% extends "classifieds-base.html" %}

{% block subpage_title %}
    | View your posts
{% endblock %}

{% block internal %}
<div>
    <div class="padded">
        {% if '/all' in request.path %}
            <a href="/viewPosted/all" class="button active">All your posts</a>
        {% else %}
            <a href="/viewPosted/all" class="button">All your posts</a>
        {% endif %}

        {% if '/active' in request.path %}
            <a href="/viewPosted/active" class="button active">All active posts</a>
        {% else %}
            <a href="/viewPosted/active" class="button">All active posts</a>
        {% endif %}

        {% if '/completed' in request.path %}
            <a href="/viewPosted/completed" class="button active">All completed posts</a>
        {% else %}
            <a href="/viewPosted/completed" class="button">All completed posts</a>
        {% endif %}

        {% if '/expired' in request.path %}
            <a href="/viewPosted/expired" class="button active">All expired posts</a>
        {% else %}
            <a href="/viewPosted/expired" class="button">All expired posts</a>
        {% endif %}
    </div>
{% if posts.__len__() == 0 %}
There are no active posts to show.
    {% else %}
<table class="sortable">
    <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Price</th>
        <th>Date Posted</th>
        <th class="sorttable_nosort"></th>
    </tr>
{% for post in posts %}
    <tr>
        <td><a href="/viewClassified/{{ post[0] }}">{{ post[1] }}</a></td>
        <td><article>{{ post[2] }}</article></td>
        <td>{{ post[3] }}</td>
        <td>{{ post[4].date() }}</td>
        <td>
        {% if post[6] == False %}
            {% if post[7] == True %}
                <a href="/reactivate/{{ post[0] }}">Renew this ad</a>
            {% else %}
                <a href="/markComplete/{{ post[0] }}">Mark as complete</a>
            {% endif %}
        {% endif %}
        </td>
    </tr>
{% endfor %}
</table>
    {% endif %}
</div>
{% endblock %}